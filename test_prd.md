# テスト用PRD

## 概要
新しいWebアプリケーションを開発する。

## 機能要件
- ユーザー登録機能
- ログイン機能
- データ表示機能

## 非機能要件
- レスポンス時間: 1秒以内
- 同時ユーザー数: 1000人

# **AIレビューチーム編成機能 — 背景と設計概要（修正版）**

## 1. 背景

* 現状のレビュー機能では、**レビューを行うAIエージェントは常に固定の4人**（PdM, BE, UX, QA など）で構成されている。
* 各指摘について「誰がレビューしたのか」は表示されるものの、ユーザーにとっては **“毎回同じ顔ぶれで直すだけ”** という体験に留まってしまっている。
* その結果：

  * レビュー体制のバリエーションがなく、目的別（PRD、法務、マーケ記事など）のレビューに対応できない。
  * 「このチームで見てもらいたい」という納得感や主体性が得られない。
  * 楽しさやカスタマイズ性に欠ける。

---

## 2. やりたいこと（Why）

* レビューを **“専門家チームを編成する体験”** に進化させる。
* ユーザーが自分で「この人たちに見てもらった」と選べることで、**フィードバックへの納得感と主体性** を高める。
* レビュー体制を **PRDレビュー / 法務チェック / ブログチェック** などのユースケースごとにプリセットし、適切なメンバーを自動選択。
* 選んだAIメンバーごとのフィードバックを明示化し、そのAIと対話しながら深掘りできるようにする。

---

## 3. 具体的なユーザー体験フロー

```
[ドキュメント追加]
   ↓
[レビュー体制選択（プリセット）]
   ↓
[メンバー選択（カードUI）]
   ↓
[レビュー開始 → 結果画面(指摘カード＋AI対話)]
```

### (1) ドキュメント追加

* ユーザーがPRDや契約書、ブログ記事などをアップロード or コピペ入力。
* 「レビュー体制を選ぶ」へ進む。

### (2) レビュー体制選択

* プリセット体制（例: PRDレビュー、法務チェック、ブログチェック）を選択。
* 各体制に応じてデフォルトのAIメンバー構成が決定。

  * PRDレビュー → PdM, BE, UX, QA
  * 法務チェック → 法務, セキュリティ, PdM
  * ブログチェック → コピーライター, マーケ, UX

### (3) メンバー選択（カードUI）

* 約10人のAIエージェントがプロフィールカードで一覧表示。
* デフォルトチームは選択済み状態で表示されるが、ユーザーは自由に追加・削除できる。
* 下部に「選択した◯人でレビューを開始」と表示され、カスタマイズが簡単に可能。

### (4) レビュー開始 → 結果

* ローディング演出で「選んだチームがレビュー中…」を表示。
* 結果画面：

  * 最重要指摘（P0）を中央カードに強調表示。
  * その他の指摘をリスト表示。
  * 各指摘には「誰が言ったか」をアバター付きで明示。
  * さらに、必要に応じてそのAIと直接対話できる。

---

## 4. 技術的な実装ポイント

### フロントエンド

* `PrdInputForm.tsx`

  * 体制選択 → メンバー選択を挟んで `panel_type` をAPIに渡す。
* `agents.ts`

  * 10人前後のAIエージェントプロフィール（id, 名前, 肩書き, タグ, アバター）を定義。
* 選択UIはカード型（グリッド形式、クリックで選択/解除）。

### バックエンド

* `/reviews` エンドポイント

  * `panel_type` パラメータを受け取り、指定されたAI構成でレビュー実行。
  * 各指摘に `agent_id` を含めて返却。

---

## 5. 期待される価値

* **多様性**：毎回固定メンバー4人ではなく、ユースケースに応じたチーム編成が可能に。
* **納得感**：ユーザーが「自分で選んだ人に見てもらった」と感じられる。
* **柔軟性**：プリセット体制で迷わず始められ、かつ自由にカスタマイズできる。
* **拡張性**：将来的にユーザー独自のチーム保存も可能。
